# 2021.6.28

## 何东阳

开题报告

SLAM算法实现：

- 雷达仅能实现一定高度的建模，需结合顶部相机全面建模

自主导航实现：

1、使用激光雷达 SLAM 建立的地图为栅格地图

2、白色表示该栅格空间内无障碍物，机器人 可以通行;黑色表示该栅格空间内存在障碍物，机器人不能通行;灰色表示该栅格空间尚未 探索，可通行情况不明。

- 定位
- 路径规划

## 盘卓实

上午：开题报告、尝试连接Kinect，失败

下午：调研了用前端和Qt实现可视化编程的可能性，前者基本不可能，后者找到了一个可以编译，但是不能运行的可视化编程程序[thymio](https://github.com/aseba-community/thymio-vpl2/tree/master/thymio-vpl2)。因此决定调整顺序，先实现学长功能和参观导引功能，再尝试做机械臂，VPL最后再做。

晚上：看了一下学长的代码，发现学长自己写的代码基本都在wpb_home_apps这个文件夹了。明天再仔细研究。以及又试了一下用虚拟机连Kinect，定位了问题所在。

- Set up udev rules for device access: `sudo cp ../platform/linux/udev/90-kinect2.rules /etc/udev/rules.d/`, then replug the Kinect.

![image-20210628204934729](https://github.com/hdy2001/2021thu10/blob/main/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/image/image-20210628204934729.png?raw=true)


USB口连接正常，可以找到Kinect v2。报错一个奇怪的TIME_OUT。

## 魏子卜

上午： 开题报告 语音输出部分：遇到连接不上问题，在李晨韬笔记本上可以显示连接。可以尝试换成其他接口。 语音识别部分：遇到USB无法识别的问题，明天在双系统的笔记本上试一试。

下午： 学习一些现有的开源可视化编程的代码。 尝试运行Thymio代码，发现版本方面的问题。 卸载Qt4，装了Qt6。 和pzs讨论后，决定先跳过可视化编程的部分。

晚上： 去科技服务队修理了笔记本声道的问题，明天试试能否识别机器人音频线。 学习学长的报告及启智ros机器人参考文档。 继续学习ros有关的知识。

## 李晨韬

上午：开题报告及试验语音输出部分，并尝试寻找以及学习VPL编程的开源代码

下午： ubuntu虚拟机出现问题，部分功能无法启用。 学习blockly源码，在本机上运行demo并尝试修改

晚上：安装ubuntu双系统，安装qt5，运行程序正常

# 2021.6.29

## 何东阳

### 上午

安装ubuntu虚拟机，配置ROS开发环境

### 下午

- 继续配置开发环境

- 安装qt5的linux版本

- 研究并跑通学长qt代码，研究设计自己的界面，初步摸清**功能需求**。

  - 登陆界面：一个进入按钮和一个退出按钮
  - 模式选择选择页面（可选择）分为VPL模式和自动导游模式
  - VPL界面
  - 自动导游页面

- 创建qt工程，并添加到小组仓库中，完成了所有页面的基本布局，完成部分如下：
  <div align=center><img src="https://github.com/hdy2001/2021thu10/blob/main/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/image/202106291.PNG?raw=true" alt="202106291" style="zoom:67%;" /></div>

目前登录窗口有“进入”和“退出”功能，进入下一个窗口，退出结束进程。

<div align=center><img src="https://github.com/hdy2001/2021thu10/blob/main/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/image/202106292.PNG?raw=true" alt="202106292" style="zoom:67%;" /></div>

VPL模式暂时未开发；自动导游模式按钮点击后进入自动导游页面。

<div align=center><img src="https://github.com/hdy2001/2021thu10/blob/main/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/image/202106293.PNG?raw=true" style="zoom:67%;" /></div>

开始导游按钮点击后进入导游进行时界面，结束导游按钮点击后退出自动导游页面，回到模式选择页面。

<div align=center><img src="https://github.com/hdy2001/2021thu10/blob/main/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/image/202106294.PNG?raw=true" alt="202106294" style="zoom:67%;" /></div>

导游进行时页面是机器人在导游过程中显示的页面，用户点击语音播报（未开发）和停止播报按钮选择开始语音控制和停止语音控制。结束导游按钮必须在停止播报按钮点击后才能点击，点击后返回自动导游页面。

主要解决了两个问题：在创建自动导航进行窗口时，我因为太久没使用qt忘记如何添加照片，导致照片迟迟无法显示，经过查阅相关资料我发现是因为我没有在项目中创建照片资源库，创建后图片成功显示；将窗口显示在屏幕中央。
 
 ## 盘卓实
 - 上午：用第一种方式进行了slam建图，成功
 - 下午：用gmapping方式进行slam建图（这个更准确），由于电池不行，失败。之后研究基于maptool的自主导航。
 - 晚上：基于maptool进行自主导航，失败，失败原因是运行rosrun wp_pkg wp_node时，程序找不到之前设置的导航点，之后按照文档修改~/catkin_ws/src/waterplus_map_tools/launch/add_waypoint.launch，将其中的robot换成用户名。设置之后在roslaunch waterplus_map_tools wpb_home_nav_test.launch自动定位初始点（找导航点的前一步）就失败了。
 明天计划放弃这个方法，转而使用实验8的方法，即手动设置XYZ坐标的方式，进行设置导航点。
 因为担心进度问题，打算以后在一个方法上尝试最多5小时，如果还是没有进展就及时放弃。

## 李晨韬
今天遇到了较多的问题

Problem:

1.Invoking "make -j4 -l4" failed   编译c-make失败 c-make编译c++的规则中不允许换行，而python是可以的，奇奇怪怪的bug

2.Rviz界面出来后无法运行摄像头，报错cannot launch node of type [joint_state_publisher_gui/joint_state_publisher_gui]

解决方法：sudo apt-get install ros-kinetic-joint-state-publisher-gui

3.最令人头疼的报错：[Error] [DepthPacketStreamParser] Packet buffer is NULL 显示我opencl库中有什么没装，但我显然是能按操作手册装的都装了，就是因为没有Nvidia的显卡驱动，opencl始终装不好，曾一度以为这个功能没法进行开放。

解决方法：进入kinetic_bridge.launch文件直接修改启动方式，既然opencl没装好我就用opengl和cpu执行../kinetic_bridge.launch -> "_depth_method:=opengl _reg_method:=cpu"

4.下载完iai-kinetic后要检查如下三组指令
./Protonect gl to test OpenGL support.

./Protonect cl to test OpenCL support.

./Protonect cpu to test CPU support.

5.下载不了Nvidia/CUDA 

收获：跑通了相机检测人脸、物品等四个程序，明白程序如何从摄像头中截取图像，ros中的opencv3是比较好使用的

# 2021.6.30
## 何东阳
### 上午
- 决定了在虚拟机上开发qt程序，有利于数据传输
- 完成了环境的搭建
- 更新了日志格式，如果要在md格式的日志中显示图片，需输入格式  \<div align=center>\<img src="图片网页地址" alt="图片名" style="zoom:67%;" /></div\> 
### 下午
- 继续研发qt程序
  - 导航进行界面添加初始位置调整按钮
  - 制作操控实例，成功调用系统函数
  - 尝试在qt界面中播放视频，成功。
  - 在同学电脑上运行程序显示有个头文件不存在，尝试解决bug

